<div class="container">
  <input
    type="file"
    accept="image/*"
    capture="environment"
    (change)="captureImage($event)"
    class="file-input"
  />
  <div class="image-container">
    <canvas #imageCanvas></canvas>
  </div>
  <div class="controls" *ngIf="capturedImage">
    <button mat-raised-button color="primary" (click)="addShape('polygon')">
      Add Polygon
    </button>
    <button mat-raised-button color="primary" (click)="addShape('polyline')">
      Add Polyline
    </button>
    <button mat-raised-button color="primary" (click)="addShape('rectangle')">
      Add Rectangle
    </button>
    <button
      mat-raised-button
      color="primary"
      (click)="undo()"
      [disabled]="this.historyIndex <= 0"
    >
      Undo
    </button>
    <button
      mat-raised-button
      color="primary"
      (click)="redo()"
      [disabled]="this.historyIndex >= this.history.length - 1"
    >
      Redo
    </button>
    <button mat-raised-button color="accent" (click)="exportAnnotations()">
      Export Annotations
    </button>
    <button mat-raised-button color="warn" (click)="exportImage('png')">
      Export Image (PNG)
    </button>
    <button mat-raised-button color="warn" (click)="exportImage('jpg')">
      Export Image (JPG)
    </button>
  </div>
</div>
